<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Barreau — Informations officielles</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/CalBarSeal.svg/1200px-CalBarSeal.svg.png">
</head>
<body>
  <header>
    <div class="brand">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/CalBarSeal.svg/1200px-CalBarSeal.svg.png" alt="Logo" style="width:60px;border-radius:8px;">
      <div>
        <h1>Barreau — Informations officielles</h1>
        <div class="small">Règlements, membres et informations</div>
      </div>
    </div>
    <nav>
      <a href="home.html" data-target="home" class="active">Accueil</a>
      <a href="regles.html" data-target="regles">Règlement</a>
      <a href="membres.html" data-target="membres">Membres</a>
      <a href="recrutement.html" data-target="recrutement">Recrutement</a>
      <a href="actualites.html" data-target="actualites">Actualités</a>
      <a href="contact.html" data-target="contact">Contact</a>
    </nav>
  </header>
<div class="card">
  <h3>Recrutement</h3>
  <p class="muted">Souhaitez-vous rejoindre le Barreau ? Remplissez le formulaire ci‑dessous.</p>
  <form id="apply-form" onsubmit="handleApply(event)">
    <div class="row">
      <label>Nom</label>
      <input required name="name" placeholder="Ex: Maître Dupont" />
    </div>
    <div class="row">
      <label>Rôle souhaité</label>
      <select name="role">
        <option>Avocat</option>
        <option>Juge</option>
        <option>Clerc</option>
      </select>
    </div>
    <div class="row">
      <label>Motivation (courte)</label>
      <textarea name="motivation" rows="4" placeholder="Pourquoi souhaitez-vous rejoindre le Barreau ?"></textarea>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button type="submit">Envoyer la candidature</button>
      <div class="small muted">Les candidatures seront envoyées au bureau compétent.</div>
    </div>
  </form>
</div>

<script>
  function copyDiscord(){
    navigator.clipboard.writeText('https://discord.gg/TON_INVIT')
      .then(()=>alert('Lien Discord copié !'));
  }

  // Webhook URLs
  const webhookApply = 'https://discord.com/api/webhooks/1420733240616030238/JmXE-RB7jIjSI6SgRRehhwDSuQUcWXBVhLuCvXtX0TwxCwXmhtI6_qC8z_FVhtkQFhdh';
  const webhookContact = 'https://discord.com/api/webhooks/1420733232294527067/Gk6jY6jajutYzjC6UIufKTTteNfUgXzbdDdltaTmkDQgTD1MJbgITFJbHrsA0g8DeOFI';

  async function handleApply(e){
    e.preventDefault();
    const data = new FormData(e.target);

    const embed = {
      embeds: [{
        title: "Nouvelle candidature", // title : titre de l’embed.
        color: 3447003, // Bleu | color : couleur de la bordure de l’embed (valeur décimale).
        fields: [
          { name: "Nom", value: data.get('name'), inline: true },
          { name: "Rôle souhaité", value: data.get('role'), inline: true },
          { name: "Motivation", value: data.get('motivation') }
        ],
        timestamp: new Date() // timestamp : ajoute la date/heure automatiquement.
      }]
    };

    await fetch(webhookApply, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(embed)
    })
    .then(()=>alert('Candidature envoyée avec succès !'))
    .catch(()=>alert('Erreur lors de l\'envoi de la candidature.'));

    e.target.reset();
  }

    async function handleContact(e){
    e.preventDefault();
    const data = new FormData(e.target);

    const embed = {
      embeds: [{
        title: "Nouveau message de contact", // title : titre de l’embed.
        color: 15158332, // Rouge clair | color : couleur de la bordure de l’embed (valeur décimale).
        fields: [
          { name: "Nom / Pseudo", value: data.get('pseudo'), inline: true },
          { name: "Message", value: data.get('message') }
        ],
        timestamp: new Date() // timestamp : ajoute la date/heure automatiquement.
      }]
    };

    await fetch(webhookContact, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(embed)
    })
    .then(()=>alert('Message envoyé avec succès !'))
    .catch(()=>alert('Erreur lors de l\'envoi du message.'));

    e.target.reset();
  }
</script>
</html>
